<h1 class="text-center">
    <span data-bind="string: 'listing.edit.title'"></span>
</h1>
<!-- ko if: listing -->
<div class="panel-group">
    <div class="panel panel-default">
        <div class="panel-heading">
            <h4 class="panel-title">
                <a data-bind="string: 'listing.edit.detail.title',
                              attr: { href: '/listing/edit/' + $root.urlUtil.toUrl(listing().title) + '/' + listing().id + ((section() == 'detail') ? '' : '/detail') }"
                   class="block text-center"></a>
            </h4>
        </div>
        <div data-bind="css: { in: section() == 'detail' }" class="panel-collapse collapse">
            <div class="panel-body">
                <div data-bind="template: 'app/listing/shared/listing-form'"></div>
            </div>
        </div>
    </div>
    <div class="panel panel-default">
        <div class="panel-heading">
            <h4 class="panel-title">
                <a data-bind="string: 'listing.edit.images.title',
                              attr: { href: '/listing/edit/' + $root.urlUtil.toUrl(listing().title) + '/' + listing().id + ((section() == 'images') ? '' : '/images') }"
                   class="block text-center"></a>
            </h4>
        </div>
        <div data-bind="css: { in: section() == 'images' }" class="panel-collapse collapse">
            <div class="panel-body">
                <div data-bind="template: 'app/listing/edit/edit-images'"></div>
            </div>
        </div>
    </div>
</div>
<div class="text-center position-relative">
    <a data-bind="string: 'listing.edit.view', attr: { href: '/listing/detail/' + $root.urlUtil.toUrl(listing().title) + '/' + listing().id }"
       class="btn btn-info btn-view"></a>
    <button data-bind="string: 'label.delete', click: function () { $('#action-confirm-popover-' + listing().id).show(); }"
            class="btn btn-xs btn-danger btn-delete"></button>
    <div data-bind="template: { name: 'app/shared/action-confirm-popover',
                                data: { id: listing().id, title: 'label.delete.confirm', yesType: 'danger', action: function (id) { deleteListing(id); } } }"
         class="position-absolute action-confirm-popover-container"></div>
</div>
<!-- /ko -->
<div data-bind="template: 'app/shared/error'"></div>
