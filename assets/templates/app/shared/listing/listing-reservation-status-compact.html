<!-- ko with: { $parent: $data, status: status, role: (requester.id == $root.config().user.id) ? 'requester' : ((listingClone.owner.id == $root.config().user.id)  ? 'owner' : '') } -->
<div data-bind="template: 'app/shared/listing/listing-reservation-status-marker'"></div>
<div class="text-center">
    <button data-bind="string: 'label.next.step', attr: { 'data-target': '#reservation-whats-next-collapse-' + $parent.id }, 
                       css: { 'btn-default': status() == 'requested', 'btn-warning': status() == 'cancelled', 'btn-danger': status() == 'declined', 
                              'btn-success': (status() == 'accepted') || (status() == 'returned'), 'btn-info': status() == 'picked_up' }"
            data-toggle="collapse" class="btn btn-xs top-margin-sm bottom-margin-sm"></button>
</div>
<p data-bind="string: 'reservation.status.' + status() + '.info.' + role, attr: { id: 'reservation-whats-next-collapse-' + $parent.id },
              tokens: { ownerName: $parent.listingClone.owner.firstName, renterName: $parent.requester.firstName, title: $parent.listingClone.title }"
   class="collapse text-default text-center"></p>
<!-- /ko -->
